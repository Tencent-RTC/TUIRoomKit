<!--
  * Name: IconButton
  * @param title String required
  * @param iconName String required
  * @param hasMore Boolean
  * @param hideHoverEffect Boolean
  * Usage:
  * Use <icon-button /> in template
  *
  * 名称: IconButton
  * @param title String required
  * @param iconName String required
  * @param hasMore Boolean
  * @param hideHoverEffect Boolean
  * 使用方式：
  * 在 template 中使用 <icon-button />
-->
<template>
  <div :class="['icon-box', `${!hideHoverEffect && 'hover-effect'}`, `${disabled && 'disabled'}`]">
    <span v-if="isMobile" v-tap="handleClickEvent" class="icon-content">
      <svg-icon v-if="iconName" :icon-name="iconName" />
      <slot></slot>
      <span class="title" :class="isActive ? 'title-active' : 'title'">{{ title }}</span>
    </span>
    <span v-else class="icon-content" @click="$emit('click-icon')">
      <svg-icon v-if="iconName" :icon-name="iconName" />
      <slot></slot>
      <span class="title" :class="isActive ? 'title-active' : 'title'">{{ title }}</span>
    </span>
    <span v-if="hasMore" ref="moreSpanRef" class="icon-arrow" @click="$emit('click-more')">
      <svg-icon class="arrow" icon-name="arrow-up" size="small" />
    </span>
  </div>
</template>

<script setup lang="ts">
import SvgIcon from '../common/SvgIcon.vue';
import { isMobile } from '../../utils/useMediaValue';
import vTap from '../../directives/vTap';
interface Props {
  title: string,
  iconName?: string,
  hasMore?: boolean,
  hideHoverEffect?: boolean,
  disabled?: boolean,
  isActive?: boolean,
}

defineProps<Props>();
const emit = defineEmits(['click-icon', 'click-more']);

const handleClickEvent = () => {
  emit('click-icon');
};

</script>

<style lang="scss" scoped>
@import '../../assets/style/var.scss';
.icon-box {
  width: 78px;
  height: 100%;
  position: relative;
  display: flex;
  cursor: pointer;
  padding: 10px 0;
  &.disabled {
    color: $disabledColor;
  }
  &.hover-effect:hover {
    &:before{
      content: '';
      display: block;
      position: absolute;
      left: 0;
      bottom: 0;
      width: 78px;
      height: 18px;
      opacity: 0.59;
      background: var(--active-blur-background-color);
      filter: blur(16px);
    }
    &:after{
      content: '';
      display: block;
      position: absolute;
      left: 0;
      bottom: 0;
      width: 78px;
      height: 3px;
      background: $activeStateColor;
    }
  }
  .icon-content {
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    .title {
      font-size: 12px;
      color: var(--title-color-bg);
    }
    .title-active {
      color:var(--title-active);
    }
  }
  .icon-arrow {
    position: absolute;
    right: 0;
    top: 8px;
    width: 12px;
    height: 64px;
    &:hover {
      background: var(--icon-arrow-hover);
    }
    .arrow {
      position: absolute;
      top: 20px;
      left: 0;
    }
  }
}

@media screen and (max-width: 600px) {
  .icon-box {
    width: 72px;
    &.hover-effect:hover {
      &:before{
        width: 72px;
      }
      &:after{
       width: 72px;
      }
    }
  }
}
</style>
